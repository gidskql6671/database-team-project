<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>LMS</title>
	<link rel="stylesheet" href="/css/base.css"/>
	<link rel="stylesheet" href="/css/classroom.css"/>
</head>
<body>
	<header>
		<a href="/"> <img src="/image/lms.png" /> </a>
	</header>
	
	<div class="container_whole">
		<nav class="nav_sidebar">
			<a th:href="@{/class}">
				<img class="nav_image" alt="과목" src="/image/book.svg">
				<p class="nav_name">과목</p>
			</a>
			<a th:href="@{/sugang}">
				<img class="nav_image" alt="수강신청" src="/image/sugang.svg">
				<p>수강신청</p>
			</a>
			<a th:href="@{/classroom}">
				<img class="nav_image" alt="수강신청" src="/image/classroom.svg">
				<p>강의실</p>
			</a>
		</nav>
		
		<main>
			<h1> 강의실 예약 페이지 </h1>
			<div class="classroom_container">
				<div class="reservation">
					<h2> 강의실 예약 </h2>
					<form id="form_reservation">
						<label for="date">
							날짜:
							<input type="date" id="date" name="date">
						</label>
						<label for="building">
							건물 번호:
							<input type="text" id="building" name="buildingNumber">
						</label>
						<label for="classroom">
							강의실 번호:
							<input type="text" id="classroom" name="classroomNumber">
						</label>
						<button type="button" onclick="searchRoom()">조회</button>
					</form>
					<br><br>
					<div id="timeSlots">

					</div>
					<br>
					<form id="reserveForm">
						<label for="startTime">
							예약 시작 시간:
							<input type="time" id="startTime" name="startTime">
						</label>
						<label for="endTime">
							예약 종료 시간:
							<input type="time" id="endTime" name="endTime">
						</label>
						<button type="button" onclick="reserveRoom()">예약하기</button>
					</form>
					<div class="reservation_list">
						<h2> 강의실 예약 내역 </h2>
						<table>
							<th>건물 번호</th>
							<th>강의실</th>
							<th>예약 날짜 및 시간</th>
							<th>(취소 칸)</th>
<!--							<th:block th:each="takingClass : ${takingClasses}">-->
<!--								<tr th:object="${takingClass}">-->
<!--									<td th:text="*{lectureCode}"></td>-->
<!--									<td th:text="*{sectionCode}"></td>-->
<!--									<td th:text="*{lectureName}"></td>-->
<!--									<td>-->
<!--										<button-->
<!--												th:param1="*{lectureCode}" th:param2="*{sectionCode}"-->
<!--												th:onclick="untakeClass(this.getAttribute('param1'), this.getAttribute('param2'))"> 수강 취소</button>-->
<!--									</td>-->
<!--								</tr>-->
<!--							</th:block>-->
						</table>
					</div>
				</div>
				<div class="search">
					<h2> 검색 창 </h2>
					<form class="form_search" action="/classroom">
						<label>
							건물 번호 :
							<input type="text" name="buildingNumber">
						</label>
						<button> 검색 </button>
					</form>
				</div>
				
				<div class="list">
					<th:block th:if="${buildingNumbers != null}">
						<h2> 건물 목록 </h2>
						<table>
							<th>건물 번호</th>
							<th:block th:each="buildingNumber : ${buildingNumbers}">
								<tr>
									<td th:text="${buildingNumber}"></td>
								</tr>
							</th:block>
						</table>
					</th:block>
					<th:block th:if="${classrooms != null}">
						<h2> 강의실 목록 </h2>
						<table>
							<th>건물 번호</th>
							<th>강의실 코드</th>
							<th>강의실 이름</th>
							<th:block th:each="classroom : ${classrooms}">
								<tr th:object="${classroom}">
									<td th:text="*{buildingNumber}"></td>
									<td th:text="*{roomCode}"></td>
									<td th:text="*{name}"></td>
								</tr>
							</th:block>
						</table>
					</th:block>
				</div>
			</div>
		</main>
	</div>
	
	<script src="/js/classroom.js"></script>
</body>
</html>

<script>
	function searchRoom() {
		var timeSlots = document.getElementById('timeSlots');

		// 예약 데이터를 임시로 생성
		var reservedTimes = [9, 10, 13, 14, 15];

		// 시간대 표시
		for (var i = 9; i <= 18; i++) {
			var timeSlot = document.createElement('div');
			timeSlot.classList.add('timeSlot');
			if (reservedTimes.includes(i)) {
				timeSlot.classList.add('reserved');
			}

			var hour = document.createElement('div');
			hour.classList.add('hour');
			hour.textContent = i;
			timeSlot.appendChild(hour);

			timeSlots.appendChild(timeSlot);
		}
	}

	function reserveRoom() {
		// 예약 처리 구현
	}

</script>